<!DOCTYPE html>
<html>
<head>
  <title>HTML5 Geolocation Demo</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.0/jquery.min.js"></script>
<style>
p {
  margin: 0 0 0.3em 0;
}
</style>
</head>
<body>
  <h2>This is a demonstration of the native HTML5 Geolocation API.</h2>
  <p>Result: <span id="result">xx</span></p>
  <p>Latitude: <span id="latitude">xx</span></p>
  <p>Longitude: <span id="longitude">xx</span></p>
  <p>Altitude: <span id="altitude">xx</span></p>
  <p>Accuracy: <span id="accuracy">xx</span></p>
  <p>Altitude Accuracy: <span id="altitude-accuracy">xx</span></p>
  <p>Heading: <span id="heading">xx</span></p>
  <p>Speed: <span id="speed">xx</span></p>
<script>
  function clearResults() {
    $('#result').html('--');
    $('#latitude').html('--');
    $('#longitude').html('--');
    $('#altitude').html('--');
    $('#accuracy').html('--');
    $('#altitude-accuracy').html('--');
    $('#heading').html('--');
    $('#speed').html('--');
  }
  var geo;
  geo = navigator.geolocation;
  var successCallback = function(position) {
    console.log(position);
    $('#result').html('SUCCESS');
    $('#latitude').html(position.coords.latitude);
    $('#longitude').html(position.coords.longitude);
    $('#altitude').html(position.coords.altitude);
    $('#accuracy').html(position.coords.accuracy);
    $('#altitude-accuracy').html(position.coords.altitudeAccuracy);
    $('#heading').html(position.coords.heading);
    $('#speed').html(position.coords.speed);
  };
  var errorCallback = function(error) {
    $('#result').html(error.message);
  }
  
  console.log('About to call geo API');
  geo.getCurrentPosition(successCallback, errorCallback, { enableHighAccuracy: true });
  console.log('Asynchronous geo API call returned');
  clearResults();
</script>
</body>